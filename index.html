<!DOCTYPE html>
<html>
  <body>
     <textarea name="text" id="urltext" cols="80" rows="1"></textarea>
    <br>
      <canvas id="Canvas1" width="500" height="500" style="border:2px solid #d3d3d3"></canvas>
    <script>

   var c1 = document.getElementById("Canvas1")
    var ct1 = c1.getContext("2d")
     const txt = document.getElementById("urltext")
     var img =new Image()
     img.src="panda756.png"
      setTimeout( enter,1000)
    ct1.fillRect(50,50,50,50)
      
      
  function enter(){
    txt.value="Panda"
    setTimeout(disp,1500)
    setTimeout(dispb,2200)
  }
  function disp(){
    ct1.drawImage(img,0,0,400,400)
  }
      
  function dispb() {
  var blockSize = 4; // Size of each block
  var numBlocks = 100; // Number of blocks in each dimension
  var blockWidth = 400 / numBlocks; // Width of each block
  var blockHeight = 400 / numBlocks; // Height of each block
  var r=2
  // Loop through each block
  for (var i = 0; i < numBlocks; i++) {
    for (var j = 0; j < numBlocks; j++) {
      // Calculate the average color for the current block
      var avgColor = getAverageColor(i * blockSize, j * blockSize, blockSize, blockSize);

      // Draw a rectangle with the average color
      ct1.fillStyle = avgColor;
      ct1.clearRect(i * blockWidth, j * blockHeight, blockWidth, blockHeight);
      ct1.beginPath()
      ct1.arc(i*blockWidth +r, j*blockHeight +r, r+ .2*Math.random(), 0, 2*Math.PI);
      ct1.fill();
   //   ct1.fillRect(i * blockWidth, j * blockHeight, blockWidth, blockHeight);
    }
  }
}

// Helper function to calculate the average color of a given rectangular region
function getAverageColor(x, y, width, height) {
  var imageData = ct1.getImageData(x, y, width, height);
  var data = imageData.data;
  var numPixels = data.length / 4; // Divide by 4 because each pixel is represented by 4 values (RGBA)

  var avgR = 0;
  var avgG = 0;
  var avgB = 0;

  // Calculate the sum of red, green, and blue values for each pixel
  for (var i = 0; i < data.length; i += 4) {
    avgR += data[i];
    avgG += data[i + 1];
    avgB += data[i + 2];
  }

  // Calculate the average color values
  avgR = Math.round(avgR / numPixels);
  avgG = Math.round(avgG / numPixels);
  avgB = Math.round(avgB / numPixels);
avgR=Math.floor(avgR/5)*5
avgG=Math.floor(avgG/5)*5
avgB=Math.floor(avgB/5)*5  
  // Return the average color as a string in the RGB format
  return 'rgb(' + avgR + ', ' + avgG + ', ' + avgB + ')';
}
      

    </script>
  </body>
</html>
  
